<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[CX Social Dev Blog]]></title>
    <link href="/atom.xml" rel="self"/>
    <link href="/"/>
    <updated>2018-01-08T09:12:00+00:00</updated>
    <id>/</id>
        <generator uri="http://sculpin.io/">Sculpin</generator>
            <entry>
            <title type="html"><![CDATA[On the fly API&#039;s using Xinetd]]></title>
            <link href="/blog/2018/01/08/xinetd-APIs"/>
            <updated>2018-01-08T10:00:00+00:00</updated>
            <id>/blog/2018/01/08/xinetd-APIs</id>
            <content type="html"><![CDATA[<p>As developers, we often rely on exposing services in our software as an HTTP
API. Traditionally, our code would be executed from within a webserver
container. For example, PHP apps might run in
<a href="https://httpd.apache.org/">Apache</a>, or Java apps might run in
<a href="https://tomcat.apache.org/">Tomcat</a>.</p>

<p>In modern apps that strive to be self-contained, you might add a webserver
library and handle requests directly in your code instead.
<a href="http://www.tornadoweb.org">Tornado</a> for Python,
<a href="https://golang.org/pkg/net/http/">net/http</a> for Golang,
<a href="http://puma.io/">Puma</a> for Ruby or <a href="https://www.eclipse.org/jetty/">Jetty</a> for
JVM languages are examples of libraries for this.</p>

<p>Any of these options are typically fine, but sometimes you just want something
much, much simpler. Fortunately, it turns out Linux already comes with
everything you need. First, we need a problem to solve though.</p>

<p>At CX Social we deal with a lot of data. We need to do some maintenance work in
order to keep this data relevant and efficient. What we don't want is to
interfere with the processing we do for our users. We'd rather err on the side
of caution and only run these maintenance jobs when we are sure that servers
aren't currently experiencing high loads. One way to know is by looking at load
averages.</p>

<p>Let's build a simple HTTP API that tells us whether a server is currently busy
or not.</p>

<p>The tools we'll use here are <code>xinetd</code> and plain old <code>bash</code>. Xinetd is a
replacement for the original <code>inetd</code>. This is old software. The <a href="https://github.com/xinetd-org/xinetd">GitHub
mirror</a> of Xinetd has a history going 15
years back. It is simple: it lets you write a server program where you only
need to care about the output. All the other details, like networking, logging,
access control, are taken care of.</p>

<p>First, we'll have to install Xinetd which nowadays isn't installed by default:</p>

<pre><code class="bash">$ apt-get install xinetd  # on debian
$ pacman -S xinetd        # on arch
$ yum -y install xinetd   # on those other distros
</code></pre>

<p>Next, we'll need to do some configuration. I added following line to my
<code>/etc/services</code>:</p>

<pre><code>load_avg   9876/tcp
</code></pre>

<p>Then I added a file <code>/etc/xinet.d/load_avg</code> with the following contents:</p>

<pre><code>service load_avg
{
  flags = REUSE
  socket_type = stream
  protocol = tcp
  port = 9876
  wait = no
  user = nobody
  server = /data/load_avg
  log_on_failure += USERID
  disable = no
}
</code></pre>

<p>Some comments here. The <code>service load_avg</code> maps to what I added in
<code>/etc/services</code>, the <code>server = ...</code> will be the script that will be called when
a connection is made.</p>

<p>So, let's write the script itself. We'll be using plain bash. If the load
average is fine we'll return a <code>200 OK response</code>. If not, we'll return a <code>503
Service Unavailable</code> instead.</p>

<pre><code class="bash">#!/bin/bash

http_response() {
  local http_code="$1"
  local message="$2"

  local length=${#message}

  echo -en "${http_code}\r\n"
  echo -en "Content-Type: text/plain\r\n"
  echo -en "Content-Length: ${length}\r\n"
  echo -en "\r\n"
  echo -en "${message}"
  echo -en "\r\n"
}

http_200() {
  http_response "HTTP/1.1 200 OK" "200; $1"
}

http_503() {
  http_response "HTTP/1.1 503 Service Unavailable" "503; $1"
}

load_average=$(uptime | awk '{print $8 * 100}')
acceptable_load=$(nproc | awk '{print $1 * 100}')

if [ ${load_average} -gt ${acceptable_load} ]; then
  http_503 ${load_average}
else
  http_200 ${load_average}
fi
</code></pre>

<p>Let's break it up piece by piece. We start with a couple of functions that help
us construct a valid HTTP response. We can get the length of a value in bash
with <code>${#variable}</code> which is how we set the <code>length</code> variable. For the
rest, nothing particularly interesting is going on.</p>

<p>Next, we get the load average from the <code>uptime</code> command. Bash doesn't have good
support for float values so we get around that by multiplying with <code>100</code> which
lets us compare with <code>-gt</code> later on.</p>

<p>To calculate the acceptable load we cut some corners and simplify things a
little bit: <code>nproc</code> gives us the number of cores in the system so we use that
again multiplying by <code>100</code> so we can compare. So a <code>4</code> core machine would
accept a load of <code>4</code>. I don't love that solution but as an example it's good
enough. In a real setup you would add a little bit of extra margin.</p>

<p>After reloading Xinetd you can use any web client to access
<a href="http://hostname:9876">http://hostname:9876</a>.</p>

<h2 id="improvements">Improvements</h2>

<p>There are a couple of things we can do to improve upon this. We can extract the
<code>http_*</code> functions so we can easily source them as a library in other scripts.
We could render the response as JSON to make parsing the result neater on the
client side.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Often we really do require the capabilities of a full-blown development
environment to implement the features we need. In other situations we can get
away with a simple approach. Xinetd has been around for a very long time and
hides exactly the complexities we'd rather avoid having to deal with.</p>

<p>This technique can be used in interesting combinations. For example, you could
use it with <a href="http://www.haproxy.org/">HAProxy</a> health checks by using a
<code>httpchk</code> rather than a regular <code>tcp-check</code>. Say you have HAProxy in front of
an <a href="https://www.elastic.co/">Elasticsearch</a> cluster to automatically spread
searches. You could use our <code>load_avg</code> script above to exclude busy nodes
automatically.  Or say you have a MySQL setup with a handful of replicas for
reading and you use HAProxy to load balance these. You can write a simple
script that checks the <code>seconds_behind_master</code> value and excludes replicas that
are lagging.</p>

<p>Give it a try, see what you can come up with, and share your experiences in the
comment section below!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Our Favorite Content Of 2017]]></title>
            <link href="/blog/2017/12/22/our-favorite-content-of-2017"/>
            <updated>2017-12-22T14:30:00+00:00</updated>
            <id>/blog/2017/12/22/our-favorite-content-of-2017</id>
            <content type="html"><![CDATA[<p>As a team, we consume A LOT of blog posts, YouTube videos, podcasts, and tweets about software development and related topics each year. We asked everyone in the team to share their favorite stuff that they found online, so that you can read it too. Here we go!</p>

<h1 id="people-%26-community">People &amp; Community</h1>

<p><img src="https://media.giphy.com/media/pTY9EtkiakcU/giphy.gif" alt="The Blind" /></p>

<h3 id="in-the-kingdom-of-the-blind"><a href="https://bridgetkromhout.com/blog/in-the-kingdom-of-the-blind/">In The Kingdom Of The Blind</a></h3>

<blockquote>
  <p>As you can imagine, there are plenty of reasons that under-represented people in tech aren't going to jump the second your event's CFP opens. But submissions will pour in nonetheless... from the folks whose (devrel/marketing/field engineer) vendor job includes public speaking (and on-the-job time to fine-tune their abstracts). And spoiler alert, many of them will fall into the majority cis het white male demographic.</p>
</blockquote>

<p>Ursula recommends this for the great ideas on how to improve diversity at conferences, and an excellent candid overview of the reasons why underrepresented minorities do not speak at or attend tech conferences as often.</p>

<h3 id="we-fired-our-top-talent.-best-decision-we-ever-made."><a href="https://medium.freecodecamp.org/we-fired-our-top-talent-best-decision-we-ever-made-4c0a99728fde">We fired our top talent. Best decision we ever made.</a></h3>

<blockquote>
  <p>Your team's strength is not a function of the talent of individual members. It's a function of their collaboration, tenacity, and mutual respect.</p>
</blockquote>

<p>Hans likes this because when there's a smart guy around, you'll find it tempting to just go ask him instead of trying to do the research yourself and learn something new. He doesn't like developers who think that they know everything. They don't. In fact, you'll never know everything. Sharing knowledge and working together as a team is something we should focus on instead. Each person has their own strengths.</p>

<h3 id="the-myth-of-the-%22cool-tech-girl%22"><a href="https://code.likeagirl.io/the-myth-of-the-cool-tech-girl-7868fa63769b">The myth of the "cool tech girl"</a></h3>

<blockquote>
  <p>Don't reward good behaviour with scotch, don't tap kegs at 12pm, and don't host video game or ping pong tournaments. Don't call your employees "rockstars". Shine a harsh light on some of your internal slack channels. If your company doesn't perpetuate the kind of culture that makes women feel like they need to be 'one of the boys', they won't need the coping mechanism of the "cool tech girl".</p>
</blockquote>

<p>Ursula has seen this type of behaviour from women in tech in many countries. "I would almost go as far as to say that if you don't fit into the 'cool tech girl' box, it's difficult to survive. As a woman in tech I think you have a responsibility to speak up for diversity in the industry. It's really hard, and it's great to hear viewpoints that identify that."</p>

<h1 id="engineering">Engineering</h1>

<p><img src="https://pbs.twimg.com/media/C3G2KYAWYAEj9km.jpg" alt="Stickies on the wall kind of engineering" /></p>

<h3 id="transactions-redefined"><a href="https://www.youtube.com/watch?v=NqKNqIsB8_k">Transactions Redefined</a></h3>

<blockquote>
  <p>Event Storming is my pizza, you can add your toppings, as long as it's not database tables or pineapple</p>
</blockquote>

<p>Toon recommends this because Alberto Brandolini is a great speaker, and his vision on Domain Driven Design and software development in general is really clear and deep. He goes a long way to understand the business, and the problems associated with the business. He goes out of his way to find out how he can solve them.</p>

<h3 id="modern-software-over-engineering-mistakes"><a href="https://medium.com/@rdsubhas/10-modern-software-engineering-mistakes-bc67fbef4fc8">Modern Software Over-Engineering Mistakes</a></h3>

<blockquote>
  <p>Duplication is better than the wrong abstraction</p>
</blockquote>

<p>Jurriaan likes this because too much of technical literature is about how you should start doing things, and how everything you’ve done in the past is probably wrong. This article captures the essence of trying to architect real-life development projects.</p>

<h3 id="kubernetes-at-github"><a href="https://githubengineering.com/kubernetes-at-github/">Kubernetes at Github</a></h3>

<blockquote>
  <p>With a self-service application provisioning workflow in place, SRE can devote more of our time to delivering infrastructure products to the rest of the engineering organisation in support of our best practices, building toward a faster and more resilient GitHub experience for everyone.</p>
</blockquote>

<p>Jeffry liked this because everybody and their dog are rethinking how to do platform now that the technology to do so has matured. This write-up from Github offers a great look into the decision making and preparation that goes into gradually building up confidence. He gives the author additional points for sprinkling snippets of inspiration throughout the post: e.g. chatops-rpc to make our hubot do more than offer drunk commentary, Kelsey Hightower's "Kubernetes the hard way" which he has set his mind to working through over the holidays, flipper and mission control bar and simulating kernel panics with sysrq-trigger.</p>

<h1 id="think-differently">Think Differently</h1>

<p><img src="https://media.giphy.com/media/ximCDHoBlx4UU/giphy.gif" alt="Excel on mobile, epic experience" /></p>

<h3 id="exploring-time"><a href="https://www.youtube.com/watch?v=Zm95cYAtAa8">Exploring Time</a></h3>

<blockquote>
  <p>It’s impossible to know if this talk started on time</p>
</blockquote>

<p>Toon recommends this because Eric Evans uses his own Domain Driven Design to explore better ways to think about time. Very inspiring. He shows how "generic" subdomains of software development are not generally "solved problems", and how you can make a difference there, as a programmer.</p>

<h3 id="clojure-for-the-brave-and-true"><a href="https://www.braveclojure.com/clojure-for-the-brave-and-true/">Clojure for the Brave and True</a></h3>

<blockquote>
  <p>Humor has a certain relationship to seriousness. It is appropriate to joke about serious things, but only after the right amount of time has passed. For example, it took years for me to be able to crack a smile when I remember my favorite uncle’s last words: "Hold my beer".</p>
  
  <p>I'm so proud of you, little teapot. You've run your first Clojure program! Not only that, but you've become acquainted with the REPL, one of the most important tools for developing Clojure software. Amazing!</p>
</blockquote>

<p>Niek thinks this book is a hilarious and down-to-earth explanation of yet another programming language to learn. Clojure is a Lisp dialect and will melt your brain with its elegance!</p>

<h3 id="you-suck-at-excel"><a href="https://www.youtube.com/watch?v=0nbkaYsR94c">You Suck At Excel</a></h3>

<blockquote>
  <p>This material is -I guess- kinda like basic to intermediate, but for you all it's going to be stupid hard, so try paying attention and don't slow me down.</p>
</blockquote>

<p>Toon enjoyed this because this guy solves real world problems for people using Excel. "I learned a 100 things from seeing him work like this." He knows Excel inside out.</p>

<h3 id="lemme-tell-you-about-the-most-successful-program-i-ever-wrote"><a href="https://twitter.com/revin/status/940700486117634050">Lemme tell you about the most successful program I ever wrote</a></h3>

<h6 id="twitter-thread">(twitter thread)</h6>

<blockquote>
  <p>It was the first time I genuinely understood that users don't care how something is implemented; they care how it makes them feel</p>
</blockquote>

<p>Hans thinks we put so much effort in making our application code clean and future-proof while just a tiny poorly written program (that works) can make someone really happy. Software can seem magical for some people.</p>

<h1 id="big-data">Big Data</h1>

<p><img src="https://media.giphy.com/media/xydGi3nSTlkqs/giphy.gif" alt="Ben Stiller as Big Data" /></p>

<h3 id="wat-als-tomorrowland-alles-met-je-data-en-privacy-zou-mogen-doen%3F"><a href="https://medium.com/@ransbottyn/wat-als-tomorrowland-alles-met-je-data-en-privacy-zou-mogen-doen-e25a703668b4">Wat als Tomorrowland alles met je data en privacy zou mogen doen?</a></h3>

<blockquote>
  <p>Zo'n bracelet (gelinkt aan je identiteitsbewijs trouwens) is dus een mes dat aan twee kanten snijdt: handig, maar misschien ook de reden waarom u de volgende keer net iets minder "gewenst" bent.</p>
</blockquote>

<p>Jasper likes this because it's incredible how much data a festival organizer track and save about you with just a bracelet, and also, what they (can possibly) do with it.</p>

<h3 id="deep-learning-for-chatbots"><a href="http://www.wildml.com/2016/07/deep-learning-for-chatbots-2-retrieval-based-model-tensorflow/">Deep Learning for Chatbots</a></h3>

<blockquote>
  <p>Generative models are an active area of research, but we’re not quite there yet. If you want to build a conversational agent today your best bet is most likely a retrieval-based model.</p>
</blockquote>

<p>Niek checked this out because it was exactly the right content for his reply suggestions adventure, a feature he is working on for CX Social.</p>

<p>Those were our highlights for 2017, let us know if we missed something!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Parse Your Way Through Errors]]></title>
            <link href="/blog/2017/12/01/parse-your-way-through-errors"/>
            <updated>2017-12-01T10:00:00+00:00</updated>
            <id>/blog/2017/12/01/parse-your-way-through-errors</id>
            <content type="html"><![CDATA[<p>In our code base there's a static function to log an error:</p>

<pre><code class="php">final class Debug
{
    public static function error(
        $msg,
        $obj = false,
        $category = 'user',
        $type = 'user'
    ) {
        // ...
    }
}
</code></pre>

<pre><code class="php">Debug::error('API call failed', $response, 'facebook', 'api-call-failed');
</code></pre>

<p>The first argument is a message, the second argument can be a value of any type, the third and fourth argument are used for grouping errors by category and type. This is very useful for analytics.</p>

<p>Ignore for a second that we should use the <a href="http://www.php-fig.org/psr/psr-3/">PSR-3: Logger Interface</a>. We could easily move this <code>Debug</code> class behind an implementation of that interface if we ever wanted to.</p>

<h2 id="the-problem">The problem</h2>

<p>Did you notice that the category and type have a default value <code>"user"</code>? I don't know when or why this was introduced in our code base but it's bad. When the category and type is not set the errors will get lost in the category <code>"user"</code> and the type <code>"user"</code>.</p>

<p>How can we find these <code>Debug::error</code> statements without a category and a type? We don't want to ignore these errors.</p>

<h2 id="use-a-regex%3F">Use a regex?</h2>

<p>Maybe... If the arguments are simple:</p>

<p><img src="/images/2017-12-01-parse-your-way-through-errors/regex.png" alt="RegExr experiment to find Debug::error's" /></p>

<p>(<a href="http://regexr.com/3h8th">RegExr</a>)</p>

<p>Note that this is the first regex that came to my mind. We could improve that regex but let's not waste our time. We need a better way. We need something that truly understands our code.</p>

<h2 id="nikita%27s-php-parser-to-the-rescue">Nikita's PHP Parser to the rescue</h2>

<blockquote>
  <p>A parser is useful for <a href="http://en.wikipedia.org/wiki/Static_program_analysis">static analysis</a>, manipulation of code and basically any other application dealing with code programmatically. A parser constructs an <a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract Syntax Tree</a> (AST) of the code and thus allows dealing with it in an abstract and robust way.</p>
  
  <p><a href="https://github.com/nikic/PHP-Parser/blob/master/doc/0_Introduction.markdown">https://github.com/nikic/PHP-Parser</a></p>
</blockquote>

<p>Parsing a programming language is hard. This package makes it easy!</p>

<p>Let's see how we can use the package to find <code>Debug::error</code>'s without a category and type.</p>

<ul>
<li><code>$ mkdir parser-demo</code></li>
<li><code>$ cd parser-demo</code></li>
<li><code>$ composer require nikic/php-parser</code></li>
</ul>

<p>This package is bundled with a binary (<code>php-parse</code>) to play with the parser:</p>

<pre><code class="sh">$ vendor/bin/php-parse '&lt;?php Debug::error("message", $var);'
====&gt; Code &lt;?php Debug::error("message", $var);
==&gt; Node dump:
array(
    0: Expr_StaticCall(
        class: Name(
            parts: array(
                0: Debug
            )
        )
        name: error
        args: array(
            0: Arg(
                value: Scalar_String(
                    value: message
                )
                byRef: false
                unpack: false
            )
            1: Arg(
                value: Expr_Variable(
                    name: var
                )
                byRef: false
                unpack: false
            )
        )
    )
)
</code></pre>

<p>The abstract syntax tree is a list of statements. The first statement is an <a href="https://github.com/nikic/PHP-Parser/blob/master/lib/PhpParser/Node/Expr/StaticCall.php"><code>Expr_StaticCall</code></a>. A static call has a <code>class</code>, <code>name</code> and <code>args</code>. If the count of <code>args</code> is not equal to 4 we know that the category and/or type is missing. Let's translate that in some code:</p>

<p><code>$ touch find.php</code></p>

<p>First, we'll need a way to find all PHP files in our code base:</p>

<pre><code class="php">&lt;?php

$directory = $argv[1];
$directoryIterator = new RecursiveDirectoryIterator($directory);
$directoryIterator = new RecursiveIteratorIterator($directoryIterator);
$files = new RegexIterator($directoryIterator, '/^.+\.php$/i', RecursiveRegexIterator::GET_MATCH);
</code></pre>

<p>We can now pass a path to our code base as a command line argument:</p>

<p><code>$ php find.php ~/path/to/code</code></p>

<p>Secondly, we'll need a way to traverse all nodes of an AST. Meet the <a href="https://github.com/nikic/PHP-Parser/blob/master/doc/2_Usage_of_basic_components.markdown#node-traversation"><code>NodeTraverser</code></a>.</p>

<pre><code class="php">&lt;?php

use PhpParser\Error;
use PhpParser\NodeTraverser;
use PhpParser\ParserFactory;
use PhpParser\NodeVisitor\NameResolver;

require_once __DIR__ . '/vendor/autoload.php';

// ... directory iterator

$parser = (new ParserFactory)-&gt;create(ParserFactory::PREFER_PHP7);

foreach ($files as $file) {
    try {
        $code = file_get_contents($file[0]);
        $statements = $parser-&gt;parse($code);
        $traverser = new NodeTraverser;
        $traverser-&gt;addVisitor(new NameResolver);
        $traverser-&gt;addVisitor(new DebugErrorVisitor($file[0]));
        $traverser-&gt;traverse($statements);
    } catch (Error $e) {
        echo 'Parse Error: ', $e-&gt;getMessage(), PHP_EOL;
    }
}
</code></pre>

<p>The <code>NodeTraverser</code> will call a method (<code>enterNode</code>) on each visitor for each node in the AST. Let's implement <code>DebugErrorVisitor</code>:</p>

<pre><code class="php">&lt;?php

use PhpParser\Node;
use PhpParser\NodeVisitorAbstract;
use PhpParser\Node\Expr\StaticCall;

require_once __DIR__ . '/vendor/autoload.php';

final class DebugErrorVisitor extends NodeVisitorAbstract
{
    private $file;

    public function __construct($file)
    {
        $this-&gt;file = $file;
    }

    public function enterNode(Node $node)
    {
        if (!$node instanceof StaticCall) {
            return;
        }

        if ($node-&gt;class instanceof Name &amp;&amp; $node-&gt;class-&gt;toString !== 'Debug') {
            return;
        } elseif ($node-&gt;class !== 'Debug') {
            return;
        }

        if ($node-&gt;name !== 'error') {
            return;
        }

        if (count($node-&gt;args) !== 4) {
            echo "Found {$node-&gt;class}::{$node-&gt;name} in {$this-&gt;file} on line {$node-&gt;getLine()}", PHP_EOL;
        }
    }
}

// ... directory iterator
</code></pre>

<ol>
<li>If <code>$node</code> is not a <code>StaticCall</code> we'll return.</li>
<li>If the class name is not <code>Debug</code> we'll return (The class will be a <code>Name</code> instance if it's in a namespace).</li>
<li>If the name of the method we're calling is not <code>error</code> we'll return.</li>
<li>If the count of arguments is not 4, we found an <code>Debug::error</code> we're interested in.</li>
</ol>

<p>Let's put it all together:</p>

<pre><code class="php">&lt;?php

use PhpParser\Node;
use PhpParser\NodeVisitorAbstract;
use PhpParser\Node\Expr\StaticCall;
use PhpParser\Error;
use PhpParser\NodeTraverser;
use PhpParser\ParserFactory;
use PhpParser\NodeVisitor\NameResolver;

require_once __DIR__ . '/vendor/autoload.php';

final class DebugErrorVisitor extends NodeVisitorAbstract
{
    private $file;

    public function __construct($file)
    {
        $this-&gt;file = $file;
    }

    public function enterNode(Node $node)
    {
        if (!$node instanceof StaticCall) {
            return;
        }

        if ($node-&gt;class instanceof Name &amp;&amp; $node-&gt;class-&gt;toString !== 'Debug') {
            return;
        } elseif ($node-&gt;class !== 'Debug') {
            return;
        }

        if ($node-&gt;name !== 'error') {
            return;
        }

        if (count($node-&gt;args) !== 4) {
            echo "Found {$node-&gt;class}::{$node-&gt;name} in {$this-&gt;file} on line {$node-&gt;getLine()}", PHP_EOL;
        }
    }
}

$directory = $argv[1];
$directoryIterator = new RecursiveDirectoryIterator($directory);
$directoryIterator = new RecursiveIteratorIterator($directoryIterator);
$files = new RegexIterator($directoryIterator, '/^.+\.php$/i', RecursiveRegexIterator::GET_MATCH);

$parser = (new ParserFactory)-&gt;create(ParserFactory::PREFER_PHP7);

foreach ($files as $file) {
    try {
        $code = file_get_contents($file[0]);
        $statements = $parser-&gt;parse($code);
        $traverser = new NodeTraverser;
        $traverser-&gt;addVisitor(new NameResolver);
        $traverser-&gt;addVisitor(new DebugErrorVisitor($file[0]));
        $traverser-&gt;traverse($statements);
    } catch (Error $e) {
        echo 'Parse Error: ', $e-&gt;getMessage(), PHP_EOL;
    }
}
</code></pre>

<p>We can now call the script with a path to our code base and it will find <code>Debug::error</code>'s without a category and a type accurately. Perhaps we can use this script in our Jenkins setup to let a build fail if there's a <code>Debug::error</code> without a category and type.</p>

<p>We could take this one step further and ask for a category and type on the command line (using <code>readline</code>) and replace it automatically but I'll leave that as an exercise for the reader. 😏</p>

<p>Happy programming!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Refactoring to Collections]]></title>
            <link href="/blog/2017/11/15/refactoring-to-collections"/>
            <updated>2017-11-15T10:00:00+00:00</updated>
            <id>/blog/2017/11/15/refactoring-to-collections</id>
            <content type="html"><![CDATA[<p>How many times have you seen code like this?</p>

<pre><code class="php">public function displayCoffeeRunsOpenForOrders()
{
    $coffeeRuns = $this-&gt;coffeeRunsRepository-&gt;getAll();
    $openForOrders = array();

    foreach ($coffeeRuns as $coffeeRun) {
        if ($coffeeRun-&gt;ordersCanBeMade()) {
            $openForOrders[] = $coffeeRun;
        }
    }

    return $openForOrders;
}
</code></pre>

<p>Our office is very close to a <a href="http://simon-says.be/">great coffee bar</a>, and people are going there from time to time to get coffee for everyone in the office. Keeping track of who's going for coffee and who wants which coffee can be daunting, which is why I'm making this app. Let's take a closer look at that piece of code.</p>

<p>We're manually traversing an array of <code>CoffeeRun</code> objects that we got out of the Repository to filter out those who are open for orders. If we find one, we add it to a new array. This way we build a list of <code>CoffeeRuns</code> that are still accepting orders.</p>

<h2 id="to-iterator-or-not%2C-that%27s-the-question">To Iterator or not, that's the question</h2>

<p>Now, there's nothing very wrong with this, but it could be made a whole lot better, I think. Let's say that the Repository contains 1000 <code>CoffeeRun</code>s. We're now forcing the Repository to return an array of 1000 <code>CoffeeRun</code> objects when we call <code>getAll()</code>. That's not great. But let's think about it... The Repository already represents a list of all <code>CoffeeRun</code> objects. Why can't we just iterate over it? Something like this:</p>

<pre><code class="php">public function displayCoffeeRunsOpenForOrders()
{
    $coffeeRuns = $this-&gt;coffeeRunsRepository;
    $openForOrders = array();

    foreach ($coffeeRuns as $coffeeRun) {
        if ($coffeeRun-&gt;ordersCanBeMade()) {
            $openForOrders[] = $coffeeRun;
        }
    }

    return $openForOrders;
}
</code></pre>

<p>Having a repository we can iterate over like that would already be a first step. We could implement the <code>Iterator</code> interface within the Repository, and have this functionality immediately. But that would leave the foreach out there, and that would also present a problem for our dependency injection: the class where this <code>displayCoffeeRunsOpenForOrders</code> is a controller, and it has the Repository injected in its constructor, like this:</p>

<pre><code class="php">public function __construct(CoffeeRunsRepository $repository)
{
    $this-&gt;coffeeRunsRepository = $repository;
}
</code></pre>

<p>If we'd count on the fact that the Repository is now an <code>Iterator</code>, we should either typehint on it, but then we lose our typehint for <code>CoffeeRunsRepository</code>, which we don't want. Or we could make the <code>CoffeeRunsRepository</code> interface extend the <code>Iterator</code> interface, but then we get a really big interface we need to implement for every implementation of the Repository. Both of which are annoying to say the least.</p>

<h2 id="think-solidly-different">Think SOLIDly Different</h2>

<p>Let's try something completely different. In fact, the <code>foreach</code> in that method, is blocking progress for us right now; Let's extract that whole block to a method. This is what was in the controller before the extraction:</p>

<pre><code class="php">public function displayCoffeeRunsOpenForOrders()
{
    $coffeeRuns = $this-&gt;coffeeRunsRepository-&gt;getAll();
    $openForOrders = array();

    foreach ($coffeeRuns as $coffeeRun) {
        if ($coffeeRun-&gt;ordersCanBeMade()) {
            $openForOrders[] = $coffeeRun;
        }
    }

    return $openForOrders;
}
</code></pre>

<p>In the Repository we added a new method <code>openForOrders()</code>, and we kept the same implementation as before, which now resides in the implementation of that method:</p>

<pre><code class="php">interface CoffeeRunsRepository
{
    // ...

    /**
     * @return CoffeeRun[] A list of CoffeeRuns open for orders
     */
    public function openForOrders();

    // ...
}
</code></pre>

<pre><code class="php">final class CoffeeRunsRepositoryInMemory implements CoffeeRunsRepository
{
    // ...

    public function openForOrders()
    {
        $coffeeRuns = $this-&gt;getAll();
        $openForOrders = array();

        foreach ($coffeeRuns as $coffeeRun) {
            if ($coffeeRun-&gt;ordersCanBeMade()) {
                $openForOrders[] = $coffeeRun;
            }
        }

        return $openForOrders;
    }

    // ...
}
</code></pre>

<p>This is what's left in the controller after extraction:</p>

<pre><code class="php">public function displayCoffeeRunsOpenForOrders()
{
    return $this-&gt;coffeeRunsRepository-&gt;openForOrders();
}
</code></pre>

<p>I don't like the <code>Repository</code> word in there, while we're thinking about the Repository as just being a Collection. Let's rename the variable in our controller. Notice how well this reads:</p>

<pre><code class="php">public function displayCoffeeRunsOpenForOrders()
{
    return $this-&gt;coffeeruns-&gt;openForOrders();
}
</code></pre>

<p>"Return CoffeeRuns that are Open For Orders". I like it. What's even better, is that the filtering of the Collection is now happening in the object that worries about the Collection, namely the Repository. This means that the specific implementations can optimize for their own benifits. E.g. the database implementation of the Repository can use a specific <code>WHERE</code> query so that it doesn't need to filter <code>CoffeeRun</code>s in PHP, and as a result of that it doesn't need to load a whole list of <code>CoffeeRun</code> objects into memory.</p>

<h2 id="bump-your-head-twice">Bump your head twice</h2>

<p>What if we want a second method in our controller that displays all CoffeeRuns that are open for orders, and will happen before noon? The <code>openForOrders()</code> method won't be enough. We could use it, and then use a <code>foreach</code> as in the first example of the blog post, but then we're back to square one. We could also make it a Repository method, and that would be okay, but only if we don't have to do it too many times. Let's look for a different solution.</p>

<p>It looks like we now have two problems:</p>

<ol>
<li>We want to encapsulate the "looping over a list and picking out specific items"</li>
<li>We want to combine several of these actions on a list, or at least do them in succession</li>
</ol>

<p>The problems always come up when we're talking to the Repository. We made two changes to it, that were both half solutions. The Repository has too many responsibilities (Storage and Collection). What would happen if we'd return an object representing a list of CoffeeRun objects from the Repository, and use that to iterate over? The Repository only takes care of the storage, and the Collection object takes care of the Collection stuff.</p>

<p>What we want to do is "filter" CoffeeRuns so that we get CoffeeRuns that are open for orders, and then filter those again so that we get those open for orders that are happening before noon. In pseudo code:</p>

<pre><code class="php">coffeeRuns = repository.getAll
coffeeRuns
    .thatAre(openForOrders)
    .thatAre(happeningBeforeNoon)
</code></pre>

<p>If we can express <code>openForOrders</code> and <code>happeningBeforeNoon</code> as functions that take a <code>CoffeeRun</code> object and return a boolean (we'll call them predicates), then the <code>thatAre()</code> implementation could be very generic! Let's check it out:</p>

<pre><code class="php">$openForOrders = function (CoffeeRun $coffeeRun)
{
    return $coffeeRun-&gt;ordersCanBeMade();
};

$noon = new DateTime('today noon');
$happeningBeforeNoon = function (CoffeeRun $coffeeRun) use ($noon)
{
    return $coffeeRun-&gt;getDate() &lt; $noon;
};
</code></pre>

<p>Now we'll create the <code>CoffeeRuns</code> Collection object, with a <code>thatAre</code> method:</p>

<pre><code class="php">interface CoffeeRuns
{
    /**
     * @param callable function that takes a CoffeeRun and returns a boolean
     *
     * @return CoffeeRuns that match the predicate
     */
    public function thatAre(callable $matchingPredicate);

    /**
     * @return CoffeeRun[] An array of CoffeeRuns
     */
    public function asArray();
}
</code></pre>

<p>Let's create a naïve <code>array</code> based implementation of it:</p>

<pre><code class="php">final class CoffeeRunsArray implements CoffeeRuns
{
    private $coffeeRuns;

    public function __construct(array $coffeeRuns)
    {
        $this-&gt;coffeeRuns = $coffeeRuns;
    }

    public function thatAre(callable $matchingPredicate)
    {
        return new static(
            array_filter(
                $this-&gt;coffeeRuns,
                $matchingPredicate
            )
        );
    }

    public function asArray()
    {
        $this-&gt;coffeeRuns;
    }
}
</code></pre>

<p>Right now, we can have our <code>CoffeeRunsRepository</code> return a <code>CoffeeRuns</code> Collection object for the <code>getAll()</code> method instead of <code>CoffeeRun[]</code> (an array of CoffeeRun) objects, and remove the specific methods we created, like <code>openForOrders()</code>.</p>

<pre><code class="php">interface CoffeeRunsRepository
{
    /**
     * @return CoffeeRuns A collection of CoffeeRuns
     */
    public function getAll();
}
</code></pre>

<p>In the controller, we now get this:</p>

<pre><code class="php">final class CoffeeController
{
    private $coffeeRuns;
    private $openForOrders;
    private $happeningBeforeNoon;

    public function __construct(CoffeeRunsRepository $repository)
    {
        $this-&gt;coffeeRuns = $repository;

        $this-&gt;openForOrders = function (CoffeeRun $coffeeRun)
        {
            return $coffeeRun-&gt;ordersCanBeMade();
        };

        $noon = new DateTime('today noon');
        $this-&gt;happeningBeforeNoon = function (CoffeeRun $coffeeRun) use ($noon)
        {
            return $coffeeRun-&gt;getDate() &lt; $noon;
        };
    }

    public function displayCoffeeRunsOpenForOrders()
    {
        $coffeeRuns =
            $this-&gt;coffeeRuns-&gt;getAll()
            -&gt;thatAre($this-&gt;openForOrders);

        return $coffeeRuns-&gt;asArray();
    }

    public function displayCoffeeRunsOpenForOrdersAndBeforeNoon()
    {
        $coffeeRuns =
            $this-&gt;coffeeRuns-&gt;getAll()
            -&gt;thatAre($this-&gt;openForOrders)
            -&gt;thatAre($this-&gt;happeningBeforeNoon);

        return $coffeeRuns-&gt;asArray();
    }
}
</code></pre>

<p>As you can see, the individual methods got very readable. The operations on the Collections are encapsulated. I extracted the <code>$openForOrders</code> and <code>$happeningBeforeNoon</code> predicates to class variables, because I didn't like the duplication in both controller methods, however, I'm not satisfied with their presence in the constructor. We could create a <code>Predicate</code> interface and make the <code>thatAre()</code> method accept <code>Predicate</code> instances. As a result our controller would just do something like <code>$coffeeRuns-&gt;thatAre(new OpenForOrders());</code>. But let's leave it like this for now. I've got some critical questions coming in:</p>

<h2 id="wait-a-minute%21-you-didn%27t-solve-the-memory-problem%21">Wait a minute! You didn't solve the memory problem!</h2>

<p>Exactly. Let's do that right now.</p>

<pre><code class="php">final class CoffeeRunsWithIterator implements CoffeeRuns
{
    private $coffeeRuns;
    private $predicates;

    public function __construct(Iterator $coffeeRuns, array $predicates = array())
    {
        $this-&gt;coffeeRuns = $coffeeRuns;
        $this-&gt;predicates = $predicates;
    }

    public function thatAre(callable $matchingPredicate)
    {
        $predicates = $this-&gt;predicates;
        $predicates[] = $matchingPredicate;

        return new static(
            $this-&gt;coffeeRuns,
            $predicates
        );
    }

    public function asArray()
    {
        $collectionAsArray = array();

        foreach ($this-&gt;coffeeRuns as $coffeeRun) {
            foreach ($this-&gt;predicates as $predicate) {
                if (call_user_func($predicate, $coffeeRun) !== true) {
                    continue 2;
                }
            }

            $collectionAsArray[] = $coffeeRun;
        }

        return $collectionAsArray;
    }
}
</code></pre>

<p>This is an implementation of the <code>CoffeeRuns</code> Collection interface that takes an <code>Iterator</code>. Whenever the <code>thatAre()</code> method gets called with a predicate, we don't do anything, except for creating a new instance of the Collection class with the same <code>Iterator</code> in it, but with the predicate added to the list of predicates that must be matched for each element in the Collection. It's only at the last step, when we try to extract the contents of the collection, that we run the <code>Iterator</code> and check every value against the given predicates. We still need to run the predicates against the whole collection, but because they are within an <code>Iterator</code>, the <code>Iterator</code> can e.g. get them from the database one by one. That's an implementation detail of the Repository.</p>

<h2 id="what-if-we-want-to-be-able-to-use-mysql-%60where%60-statements-in-our-repositories%3F">What if we want to be able to use MySQL <code>WHERE</code> statements in our Repositories?</h2>

<p>Let's say that we want to create a MySQL implementation of the Repository. We don't really want to write a query that will get the whole list of CoffeeRuns, even though we worked with an <code>Iterator</code> before (and thus preserving memory issues), so just passing closures to the <code>thatAre()</code> method will not help us a whole lot to write efficient queries. To improve on that, we could start passing our predicates as objects instead of closures, like this:</p>

<pre><code class="php">interface CoffeeRuns
{
    /**
     * @param Predicate that CoffeeRuns need to satisfy
     *
     * @return CoffeeRuns that match the predicate
     */
    public function thatAre(Predicate $matching);

    /**
     * @return CoffeeRun[] An array of CoffeeRuns
     */
    public function asArray();
}
</code></pre>

<p>A predicate could look something like this:</p>

<pre><code class="php">interface Predicate
{
    /**
     * @param CoffeeRun the CoffeeRun we want to check
     *
     * @return bool if the Predicate is satisfied by given CoffeeRun
     */
    public function isSatisfiedBy(CoffeeRun $coffeeRun);
}
</code></pre>

<p>And to get the same functionality as before we can implement it like this:</p>

<pre><code class="php">final class OpenForOrders implements Predicate
{
    public function isSatisfiedBy(CoffeeRun $coffeeRun)
    {
        return $coffeeRun-&gt;ordersCanBeMade();
    }
}
</code></pre>

<p>When we have this in place, implementing a repository that can translate these predicates to the correct <code>WHERE</code> statements is pretty much trivial: without doing an actual query, the Repository returns a <code>CoffeeRuns</code> collection object that can be filtered using <code>Predicate</code>s and when that is done, the query can be built by translating the Predicates to the appropriate <code>WHERE</code> statements. Now the <code>Predicate</code> object can still be used to check if a given <code>CoffeeRun</code> satisfies the rule encapsulated within it, but within the Repository, a more efficient way is used against the whole database table full of CoffeeRuns. Eric Evans calls this concept <code>Specification</code>, and you can read all about it in his great book <a href="http://dddcommunity.org/book/evans_2003/">Domain Driven Design</a>.</p>

<h2 id="doing-something-with-all-objects-in-our-collection">Doing something with all objects in our collection</h2>

<p>Let's say we want people to <code>stopOrdering()</code> for all <code>CoffeeRun</code>s that are happening before noon.</p>

<pre><code class="php">$stopOrdering = function (CoffeeRun $coffeeRun)
{
    $coffeeRun-&gt;stopOrdering();

    return $coffeeRun;
};

$coffeeRuns = $repository-&gt;getAll();
$stoppedOrderingForTheseRuns = $coffeeRuns
    -&gt;thatAre($happeningBeforeNoon)
    -&gt;updateEach($stopOrdering);
</code></pre>

<p>Let's add it to the Collection interface:</p>

<pre><code class="php">interface CoffeeRuns
{
    /**
     * @param Predicate that CoffeeRuns need to satisfy
     *
     * @return CoffeeRuns that match the predicate
     */
    public function thatAre(Predicate $matching);

    /**
     * @param callable function that takes a CoffeeRun and returns an updated one
     *
     * @return CoffeeRuns that got updated
     */
    public function updateEach(callable $update);

    /**
     * @return CoffeeRun[] An array of CoffeeRuns
     */
    public function asArray();
}
</code></pre>

<p>The implementation for the <code>CoffeeRunsArray</code> could be something like this:</p>

<pre><code class="php">final class CoffeeRunsArray implements CoffeeRuns
{
    private $coffeeRuns;

    public function __construct(array $coffeeRuns)
    {
        $this-&gt;coffeeRuns = $coffeeRuns;
    }

    public function thatAre(Predicate $predicate)
    {
        return new static(
            array_filter(
                $this-&gt;coffeeRuns,
                function (CoffeeRun $run) use ($predicate) {
                    return $predicate-&gt;isSatisfiedBy($run);
                }
            )
        );
    }

    public function updateEach(callable $update)
    {
        return new static(
            array_map(
                $update,
                $this-&gt;coffeeRuns
            )
        );
    }

    public function asArray()
    {
        $this-&gt;coffeeRuns;
    }
}
</code></pre>

<p>As you can see, the implementation is trivial in this case, but again it provides us with a powerful abstraction. The code that operates on the Collection doesn't have to know anything about how the Collection is implemented, it just knows about the methods we provided for interacting with it. For those that are into functional programming, we just implemented <code>filter</code> and <code>map</code> here.</p>

<p>I hope you see the value in this. For pieces of code where a lot of actions need to happen on Collections of objects, this might be the way to go. Since the code doesn't have to know anything about the implementation of the Collection, you can change it at any time. For instance, when you start out, you can just use a simple <code>Array</code> implementation, and swap it out for an <code>Iterator</code> later on when you notice memory consumption going up. It can also make things pretty readable, as demonstrated above with the <code>$coffeeRuns-&gt;thatAre(new OpenForOrders());</code>.</p>

<p>You can also choose to go A LOT further, or less far into this, as you desire. Good luck on your explorations!</p>

<p>PS: I gave a talk on this subject at the <a href="http://php.gent/">PHP.GENT meetup</a>, you can find the slides <a href="https://speakerdeck.com/turanct/the-language-of-collections">here</a>.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[When too many API calls are breaking your app]]></title>
            <link href="/blog/2017/11/02/javascript-deferred"/>
            <updated>2017-11-02T10:00:00+00:00</updated>
            <id>/blog/2017/11/02/javascript-deferred</id>
            <content type="html"><![CDATA[<p>A few weeks ago, I was confronted with a strange issue regarding the "followers" component we have in our inbox.
It's a cool feature that gives you the possibility to check which connected Twitter account is following or followed by another Twitter account. Most accounts or users don't have that many connected Twitter profiles but of course there are always some exceptions. One of our customers had more than 100 connected profiles. The process to check the relationship between the profiles is rather easy. We do a call to the back-end for every profile. In the back-end we do an API call to Twitter to fetch the relationship details. So you can imagine it takes some time if we have to do this for many profiles. In the front-end the component became very slow and it looked like the component crashed.</p>

<p><img src="/images/2017-11-02-javascript-deferred/followers.png" alt="CX Social followers dropdown in inbox" /></p>

<p>After finding out what the problem is, the next step is of course solving it. I started with checking the back-end for some improvements. Instead of calling Twitter's API for every single profile, I checked if we could ask for multiple relations at once. Sadly this wasn't the case. So this trail was a dead end.</p>

<p>If we can't change the API, we could try to avoid using the API as much as possible. By caching the result for some time, we could avoid requesting the same data multiple times as this also improves speed. This wasn't a good option either because the received data was already cached by us in the back-end.</p>

<p>The only thing I could still think of was trying to reduce the calls to the Twitter API or to our own API. Changing the back-end would be a lot of work because the endpoint is used in a lot of places in the front-end. So the only option I wanted to consider was making a change in the one place where we had the problem. In the inbox we loop over the profiles and do a seperate call for every profile. For every call to our API, we wait until we have the response before doing a new call. So instead of doing synchronous calls, we should consider doing the calls asynchronously.</p>

<p>Not knowing if this was possible in Javascript, I started searching and fell upon the <code>Promise</code> object, which does exactly what we need. However, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">the documentation for Promise on MDN</a> quickly revealed that it's not supported by some browsers we still have to support. After some more digging around the internet, we stumbled upon the <code>Deferred</code> object in jQuery which does almost the same, and works in most browsers. From its documentation:</p>

<blockquote>
  <p>It can register multiple callbacks into callback queues, invoke callback queues, and relay the success or failure state of any synchronous or asynchronous function</p>
</blockquote>

<p>So what we actually have to do is start all the calls to the back-end at once. Once we did that we create a new <code>Deferred</code> object. When all the <code>combinedCalls</code> are done, we can start updating our component. It only has to do one big update and it doesn't take that much time because the calls are all fired at the same time instead of one by one.</p>

<pre><code class="js">var profileIds = this.profileIds;

var calls = _.map(services, function (service) {
    var url = '/twitter/relation?accounts='+ service.id +'&amp;users=' + profileIds;

    return $.get(url);
});

var combinedResult = $.Deferred();

var combinedCalls = $.when.apply($, calls);

combinedCalls.done(function() {

    var resultsOfDefferedAjaxCalls = _.toArray(arguments).slice(0, calls.length);

    var relations = _.map(resultsOfDefferedAjaxCalls, function(ajaxResult) {
        return ajaxResult.result.data;
    });

    combinedResult.resolve(relations);
});

combinedCalls.fail(function() {
    // Combine args so that we can pass reason for
    // failure to reject()
    combinedResult.reject();
});

return combinedResult.promise();
</code></pre>

<p>So with some small changes we improved a lot on the loading time of the dropdown. The next problem was that some calls could take some time and if there is one slow call, all the other calls have to wait till the slowest call is finished. So I had to find another solution for this new problem. So instead of just calling the endpoint I added a callback function to the call.</p>

<pre><code class="js">var calls = _.map(services, function (service) {
    var url = '/twitter/relation?accounts='+ service.id +'&amp;users=' + profileIds;

    var onGoingCall = $.get(url);

    onGoingCall.done(callback);

    return onGoingCall;
});
</code></pre>

<p>The moment the call is finished, the callback is triggered and the component will update. You don't have to worry about slow calls because the component will update as soon as possible and the customer can see that data is loading and updating.</p>

<p>That's how we fixed this for now, hopefully we can move to the more modern approach of using <code>Promise</code> in the near future!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Tips on coding a web design close to reality]]></title>
            <link href="/blog/2017/10/16/coding-web-design-tips"/>
            <updated>2017-10-16T10:00:00+00:00</updated>
            <id>/blog/2017/10/16/coding-web-design-tips</id>
            <content type="html"><![CDATA[<p>Throughout my experience as a front end developer I've often heard designers complain about how developers fail to code a design accurately. Many designers ask their developers to make a webpage "pixel perfect". Queue developers rolling their eyes! Here I'll share my tips for bringing your code as close as possible to that psd.</p>

<h2 id="setting-expectations">Setting expectations</h2>

<p>One of the most impactful changes you can do is to make sure to set expectations with your designer. At the start it's a good idea to get your team together and figure out which parts of the design will or will not work in reality. If you're lucky you'll have an amazing product team that has done this for you. In reality the developer usually comes up with a technical pain point in the design. For example, if you find that some of the design won't translate in all browsers, you could come up with a compromise with your designer. For example, our gallery of canned responses uses a masonry layout. This layout doesn't look as perfect in Internet Explorer, but we were willing to put up with this because it meant we could use CSS for the masonry layout and not require to use a heavy javascript polyfill plugin. This slight compromise means our website will not have to forsake any page speed for the design.</p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/canned-responses-gallery-modern.png" alt="Canned responses gallery view in a modern browser" /><br />
<small>CX Social Inbox canned responses gallery view in a modern browser</small>
</center></p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/canned-responses-gallery-ie.png" alt="Canned responses gallery view in a Internet Explorer" /><br />
<small>CX Social Inbox canned responses gallery view in Internet Explorer 10</small>
</center></p>

<p>Ideally you only use javascript when absolutely nescessary for a design. I've seen it happen before that designers have asked for a <code>&lt;select&gt;</code> dropdown list of <code>&lt;option&gt;</code>'s to be styled, as the default is not as pretty as in other browsers. This requires a javascript plugin (I wrote one to do this myself at one point). But it's completely unnecessary when it does not affect the user experience that deeply. Users are used to the style of the default option list and it's not worth adding the extra javascript to your website. It's important to weigh up where your javascript is <em>really</em> enhancing the user experience. A slower website makes for a less smooth user experience!</p>

<h2 id="useful-plugins">Useful Plugins</h2>

<p>Let's check out some plugins that can come in handy to keep you and your designer happy!</p>

<h3 id="pixel-perfect">Pixel Perfect</h3>

<p>Designers love when I use <a href="https://addons.mozilla.org/en-US/firefox/addon/pixel-perfect/">this plugin</a>! You can pop in your design image and then overlay it on top of your webpage. Then you can use the inspector to adjust margins and padding in between elements.</p>

<p>My main advice when using this plugin is to be careful about fonts. Use the plugin to measure the distance <em>between</em> elements rather than making the entire page a perfect copy of the PSD. This is because the font in a PSD will not look the same in every browser. The most important part is getting the line height, margins and padding correct between the text and the next element. In this example you can see that the "Canned Responses" title is not the exact same in the PSD layover.</p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/canned-responses-pixel-perfect.png" alt="Using the pixel perfect plugin" /><br />
<small>Using the pixel perfect plugin</small>
</center></p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/canned-responses-pixel-perfect-inspector.png" alt="Using the pixel perfect plugin with the inspector" /><br />
<small>Using the pixel perfect plugin and adjusting padding to match the overlay mockup</small>
</center></p>

<h3 id="ruler-plugin">Ruler plugin</h3>

<p>A good <a href="https://addons.mozilla.org/en-US/firefox/addon/page-ruler/">ruler plugin</a> is great for when you want to maintain a consistent guttering/spacing between elements in your design. It also prevents arguments with the designer over whether some spacing is 15px or 20px ;)</p>

<p>Usually spacing between elements is consistent in the design - so if you do spot an inconsistency, ask your designer. E.g. If your webpage <code>h1</code> headings are normally 16px, but in the design they are 15px, this could be a slight mistake!</p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/using-the-ruler-plugin.png" alt="Using the ruler plugin" /><br />
<small>Using a ruler plugin to maintain consistent spacing</small>
</center></p>

<h2 id="useful-software">Useful software</h2>

<h3 id="zeplin">Zeplin</h3>

<p><a href="https://zeplin.io/">Zeplin</a> is a program that acts as a middleman between developers and designers. The designer can input the font sizes, spacing between elements and content for the developer to copy. This prevents the developer having to guess the dimensions of the design. It also generates a little bit of CSS - although in my experience you don't end up using most of that. Some CSS properties like <code>box-shadow</code> are useful. It's also useful for translating hex colours.</p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/spacing-between-elements-in-zeplin.png" alt="Examining the spacing between elements in Zeplin" /><br />
<small>Examining the spacing between elements in Zeplin</small>
</center></p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/font-details-in-zeplin.png" alt="Examining font details in Zeplin" /><br />
<small>Examining font details in Zeplin</small>
</center></p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/css-rules-in-zeplin.png" alt="Examining CSS rules in Zeplin" /><br />
<small>Examining CSS rules in Zeplin</small>
</center></p>

<h3 id="invision">Invision</h3>

<p><a href="https://www.invisionapp.com/">Invision</a> is an alternative to Zeplin, but it also includes project mockups. The inspector tool is very similar to Zeplin, so it depends on if you need software for your mockups in addition to software for being the "middleman" between developers and designers.</p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/using-invision-inspector.png" alt="Using the inspector in Invision" /><br />
<small>Using the inspector in Invision</small>
</center></p>

<h3 id="using-the-browser-inspector">Using the browser inspector</h3>

<p>This is the most important tool of course! Using the up and down keys in the CSS rules section you can tweak the width of elements until you get it right. Editing the styles in the inspector is where I spend most of my time when coding a design.</p>

<p><center>
<img src="/images/2017-10-16-coding-web-design-tips/using-the-inspector.png" alt="Using the browser inspector" /><br />
<small>Using the browser inspector</small>
</center></p>

<p>Utilize the device toolbar to get a preview of your site in other devices. When you're working on compatibility for Internet Explorer, I recommend utilizing the inspector on IE11 (or the latest IE version) as it will give you a preview back to IE8. The inspector in IE11 for compatibility mode gives you a pretty good idea of what something looks like in older versions. When you've done enough tweaking using the compatibility mode you can double check the <em>real</em> IE browser in a tool like <a href="https://www.browserstack.com/" target="_blank">Browserstack</a>. If you don't have BrowserStack you can <a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/" target="_blank">download a VM on modern.ie</a>.</p>

<h2 id="always-account-for-responsiveness">Always account for responsiveness</h2>

<p>It's likely your designer will give you a separate spec for the mobile version of your webpage. If they don't, you can ask them if they'd like you to improvise one. But whether you have a mockup for mobile or not, you should always write your code to be responsive. Responsive design is a whole other article, but <a href="https://www.w3schools.com/css/css_rwd_intro.asp" target="_blank">I recommend reading up on it</a>!</p>

<h2 id="conclusion">Conclusion</h2>

<p>As a frontend developer you need to work amicably with your designer to find the best technical solutions when implementing a design. Graceful degredation and user experience are the most important, but hopefully these tips also help you to come to a solution that works well for both the designer and the developer!</p>

<p>What developer tools do you use to help you implement designs?</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Vim As A PHP IDE - Debugging]]></title>
            <link href="/blog/2017/10/02/vim-ide-debugging"/>
            <updated>2017-10-02T10:00:00+00:00</updated>
            <id>/blog/2017/10/02/vim-ide-debugging</id>
            <content type="html"><![CDATA[<p><strong>This blogpost is part of the "Vim As A PHP IDE" series, which starts <a href="/blog/2017/01/01/vim-ide-setting-up">here</a>.</strong></p>

<p>A few weeks ago, I ended the "Vim As A PHP IDE" series with the <a href="/blog/2017/06/15/vim-ide-refactoring">refactoring</a> post. However, there's a huge thing missing from this series, and that's debugging. A lot of people debug their code using <code>var_dump</code> and <code>echo</code>, or worse, with self-made methods to markup the things they want to dump. Not only is this very old-school, there are also problems with this method. For instance, the dumped code affects the behaviour or the output of the running script. This is where the step debugger comes in.</p>

<p>A step debugger lets you step trough your code while it's running, so that you can inspect variables on the fly. This eliminates the need for dumping lines to the standard output, while giving you more insight in what's happening. e.g. you can see the whole stack trace and step through that as well...</p>

<p><a href="/images/2017-10-02-vim-ide-debugging/1.png"><img src="/images/2017-10-02-vim-ide-debugging/1.png" alt="screenshot of Vdebug in action" /></a></p>

<h2 id="how-does-this-work%3F">How does this work?</h2>

<p>Basically, the debugger, in the case of PHP <a href="https://xdebug.org/">xdebug</a>, hooks into the running code and exposes an API that you can use to set breakpoints, make the compiler run, etc... To install xdebug, follow the instructions on <a href="https://xdebug.org/docs/install">their documentation page</a>. Now you'll also have to add some lines to your <code>php.ini</code> configuration file. In my case it looks like this:</p>

<pre><code class="ini">[xdebug]
zend_extension="/path/to/xdebug.so"
xdebug.remote_enable=1
</code></pre>

<p>The important part is the <code>remote_enable=1</code>, which allows us to hook into the step debugger.</p>

<p>Then you, as a user, sets a breakpoint somewhere and inspects the state of the program at that point, using a "client" that knows how to speak the language of the debugger's API and integrates with your IDE. In our case that client is going to be the Vim plugin <a href="https://github.com/joonty/vdebug/">Vdebug</a>. You can install the plugin using your favorite plugin installation method.</p>

<h2 id="debugging-our-first-script">Debugging our first script</h2>

<p>Let's create a script <code>test.php</code> that we want to debug:</p>

<pre><code class="php">&lt;?php

$foo = 'bar';
$foo = 'baz';
</code></pre>

<p>We want to see what's inside the <code>$foo</code> variable during the time this script runs. In Vim, press <code>F5</code> to activate Vdebug. Now, run the script with debugging enabled:</p>

<pre><code class="sh">XDEBUG_CONFIG="idekey=xdebug" php test.php
</code></pre>

<p>You'll notice that the script seems to hang. In Vim, however, you'll see something like this happening:</p>

<p><img src="/images/2017-10-02-vim-ide-debugging/2.png" alt="Vdebug first startup screen" /></p>

<p>That's right! A new tab opened in Vim, containing the Vdebug window with the first breakpoint active. You can instantly see the local variables on the right, as well as the stack trace. If we now move our cursor to line <code>4</code> and press <code>F9</code>, to make the debugger run to that line and inspect the state right before it, we'll see that the <code>$foo</code> variable's value was changed to <code>'bar'</code>. Look ma, no <code>var_dump</code>!</p>

<p><img src="/images/2017-10-02-vim-ide-debugging/3.png" alt="Inspecting the $foo variable in Vdebug" /></p>

<p>You can also see the superglobals by hitting that tab in the variables screen:</p>

<p><img src="/images/2017-10-02-vim-ide-debugging/4.png" alt="Vdebug shows PHPs superglobals at this point in time" /></p>

<p>Great! Now you know the basics. Take a look at the other things you can do while debugging (stepping out, stepping over, etc) with Vdebug on <a href="https://github.com/joonty/vdebug/#quick-guide">their documentation's Quick Guide section</a>. To quickly stop debugging and return to where you were before, press <code>F6</code> twice.</p>

<p>Tip: if you don't want to set the environment variable every time, you can make XDebug try and run a remote debugger session all the time, and hook into it when you want to by enabling your client. Put this extra line in your <code>php.ini</code> configuration file:</p>

<pre><code class="ini">xdebug.remote_autostart=1
</code></pre>

<h2 id="debugging-code-that-is-run-by-a-webserver">Debugging code that is run by a webserver</h2>

<p>Running the debugger for web requests is also possible. If the webserver is running on your local machine, you don't have to change much (assuming XDebug is installed and configured as above): just append a parameter to your URL, like this <code>XDEBUG_SESSION_START=xdebug</code>. For instance, <code>https://foo.local/test.php</code> would become <code>https://foo.local/test.php?XDEBUG_SESSION_START=xdebug</code>. The debugger will now try to connect to your client!</p>

<p>So hereby we conclude this blog series about Vim as an IDE once more, and we hope that you liked it! Happy Debugging!</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Real-Time Webhooks API: Secure an Internship with us]]></title>
            <link href="/blog/2017/09/27/internship-webhooks-api"/>
            <updated>2017-09-27T11:00:00+00:00</updated>
            <id>/blog/2017/09/27/internship-webhooks-api</id>
            <content type="html"><![CDATA[<p>Are you a student looking for an internship for Spring 2018? We have a project involving real-time API's and webhooks that you might find interesting. Read on to know what we do here at CX Social and what the project is about.</p>

<h2 id="what-do-we-do%3F">What do we do?</h2>

<p>The Clarabridge CX Social team builds a customer care tool for social media. Our clients use our software to be able to respond to the incoming questions and complaints on their Facebook pages, Twitter accounts, Instagram profiles, a.o. These clients often have a high volume of messages, on several social profiles. We try to make those people’s lives easier by offering automation tools, smart routing of messages and reply suggestions, among others.
<a href="https://developers.engagor.com/team">Read more about what we do</a>.</p>

<p>As of February 2018, we have room for one or more enthusiastic interns to join us for (at least) a couple of weeks <em>(preferably 4 days a week, any time between February 2017 to June 2018)</em>, to work as part of the CX Social development team.
As an intern you are an integral part of the R&amp;D team working on different parts of the application using technologies like PHP, React, MySQL, Redis, memcached, ElasticSearch, RabbitMQ, a.o. The team consists of a designer, front-end developer, data scientist, and several system engineers &amp; full-stack web developers.
We are looking for a student with interest and knowledge of mainly back-end technologies, and some front-end knowledge.</p>

<p>Want to know more about what it’s like to do an internship here? Read about <a href="https://engagor.github.io/blog/2017/06/01/internship-gheerwijn-cx-social-developer/">Gheerwijn’s experiences</a> or the <a href="https://engagor.github.io/blog/2017/06/30/internship-achievements/">Achievements project intern Cedric is currently working on</a>.</p>

<h2 id="the-project%3A-webhooks-api">The Project: Webhooks API</h2>

<p>CX Social has an Rest (oAuth JSON) API used by several of our clients. Its documentation is publicly available on our <a href="https://developers.engagor.com">developer site</a> so have a look to see what’s possible with it.<br />
Its uses include displaying important social profile metrics on own websites, two-way syncing of data from the CX Social CRM to other (in-house or 3rd party) CRM’s (like Salesforce, a.o.). It’s also being used to display curated social mentions on own sites, or to combine data from CX Social with data from other tools on internal dashboards.</p>

<p>Today, the API is used in a <code>PULL</code> model only, where clients (periodically) request information from our API. This internship project involves a significant update to allow <code>PUSH</code> webhooks to be send to our clients.<br />
Clients have been requesting this feature, and are eager to start using it, to be notified of new data (e.g. new tweets), or updates to data (e.g. when a certain social contact’s information is filled in) in real-time.
The project would take inspiration from the <a href="https://developers.facebook.com/docs/graph-api/webhooks">Facebook Webhooks API</a>, <a href="https://dev.twitter.com/webhooks">Twitter Webhooks API</a>, or <a href="https://api.slack.com/custom-integrations/outgoing-webhooks">Slack’s Outgoing Webhooks API</a> and take into account other <a href="https://restful.io/webhooks-dos-and-dont-s-what-we-learned-after-integrating-100-apis-d567405a3671">common do's and don'ts regarding webhooks</a>.</p>

<p>It consists of the following features:</p>

<ul>
<li>Creating &amp; updating webhook-subscriptions (defining which webhooks should be delivered where). 

<ul>
<li>This should be possible via an API, as well as a web-interface;</li>
<li>Configured delivery URL’s should be checked for ownership by verification with configured handshake;</li>
<li>Configured delivery URL’s should be checked for validity of their SSL certificates;</li>
<li>Several types of subscriptions will be needed (i.e. subscribing to “account” updates, and subscribing to “user” updates);</li>
</ul></li>
<li>A robust webhook delivery system, consisting of:

<ul>
<li>Re-delivery when the delivery URL’s is unresponsive;</li>
<li>Trying to guarantee exactly-once delivery;</li>
<li>Signed webhook payloads, so receivers can verify the origin of the request;</li>
<li>Notifying the API user via email when their delivery URL continues to be unresponsive;</li>
</ul></li>
<li>Implementing the event-log that eventually triggers the webhooks:

<ul>
<li>Making sure changes in the CX Social code base trigger an event to the webhooks system;</li>
<li>Distribution of events to the right subscriptions</li>
</ul></li>
<li>Monitoring of the system to:

<ul>
<li>Be alerted when webhook delivery is running behind.</li>
</ul></li>
</ul>

<p><center>
<img src="/images/2017-09-27-internships-webhooks-api/slow-delivery.gif" alt="Slow Delivery" /><br />
<small>Our future clients, when their webhooks aren't delivered on time.</small>
</center></p>

<p>Together with the CX Social development team, you as an intern are responsible for choosing the right technologies &amp; architecture. For those interested in backend technologies, this will be an exciting project, that you can help shape, build and deploy to production.</p>

<h2 id="interested%3F">Interested?</h2>

<p>We are looking for someone to join us in the Gent, Belgium office of Clarabridge, located at <a href="https://www.google.be/maps/place/CX+Social/@51.0597245,3.7213322,17z/data=!3m1!4b1!4m5!3m4!1s0x47c37138e71c8617:0x314cae371e7de8a5!8m2!3d51.0597245!4d3.7235209">Grauwpoort 1, 9000 Gent</a>.
Does this seem like a fun challenge for you? Please reach out to <a href="&#x6d;&#97;&#105;l&#x74;&#x6f;&#58;&#106;&#x75;&#x72;&#114;&#105;a&#x61;&#110;&#46;p&#x65;&#x72;&#115;&#121;&#x6e;&#x40;&#99;&#108;a&#x72;&#x61;&#98;&#114;&#x69;&#x64;&#103;&#101;&#x2e;&#x63;&#111;&#109;">jurriaan.persyn@clarabridge.com</a> with your details and we can set-up an interview to see if there’s a fit.</p>

<p><center>
<img src="/images/2017-09-27-internships-webhooks-api/thumbs.jpg" alt="Toppie" /><br />
<small>Our future clients, when you've implemented this cool feature.</small>
</center></p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[Using decorators for debugging]]></title>
            <link href="/blog/2017/09/22/using-decorators-for-debugging"/>
            <updated>2017-09-22T10:00:00+00:00</updated>
            <id>/blog/2017/09/22/using-decorators-for-debugging</id>
            <content type="html"><![CDATA[<p>When you're writing SOLID code, you probably hide some implementation details behind interfaces in many parts of your codebase. In this post, we'll talk about an HTTP client, which is hidden behind an interface. The exact implementation we use doesn't matter. It could be a simple cURL call, or we could be using a more advance package like <a href="https://github.com/guzzle/guzzle/">Guzzle</a> or <a href="https://github.com/kriswallsmith/Buzz">Buzz</a>. In any case, our application knows only about the <code>HttpClient</code> interface that it defined, like this.</p>

<pre><code class="php">&lt;?php

namespace CoffeeRun;

interface HttpClient
{
    /**
     * @param Request $request An HTTP Request
     *
     * @throws ClientException if the request failed
     *
     * @return Response a response instance
     */
    public function execute(Request $request): Response;
}
</code></pre>

<p>Our code will ask the <code>HttpClient</code> implementation to <code>execute()</code> a <code>Request</code> and expects a <code>Response</code> if the call succeeded, or a <code>ClientException</code> if something unexpected happens.</p>

<p>The cool thing about this, is that our whole codebase needs to only know about this one interface, and not about the specific package that we're going to use. Plus, we can use another (fake) implementation of the <code>HttpClient</code> interface during testing.</p>

<h2 id="decorators">Decorators</h2>

<p>Now let's say that we want our application to make all HTTP calls with a certain User-Agent header. We don't want to go into our code and change every occurrence of <code>new Request</code> to also include that specific header. This is where decorators come in. We can "wrap" the <code>HttpClient</code> instance in a shell that acts as if it's the original <code>HttpClient</code>, but just takes the incoming <code>Request</code> and adds that header to it, and then passes on the call to the wrapped <code>HttpClient</code>. Like this:</p>

<pre><code class="php">&lt;?php

namespace CoffeeRun;

final class ClientWithUserAgent implements HttpClient
{
    private $wrappedClient;
    private $userAgentString;

    public function __construct(HttpClient $wrappedClient, $userAgentString = 'Coffee Bot 1.0')
    {
        $this-&gt;wrappedClient = $wrappedClient;
        $this-&gt;userAgentString = (string) $userAgentString;
    }

    public function execute(Request $request): Response
    {
        $request = $request-&gt;withHeader('User-Agent', $this-&gt;userAgentString);

        return $this-&gt;wrappedClient-&gt;execute($request);
    }
}
</code></pre>

<p>Creating an instance looks something like this:</p>

<pre><code>&lt;?php

$httpClient = new ClientWithUserAgent(
    new ClientCurl(),
    'ROBOCOP'
);
</code></pre>

<p>As this Decorator also implements the same <code>HttpClient</code> interface, the application doesn't even know this is happening, because from the outside it looks and behaves exactly the same. This change essentially now is a change in the configuration file of our Dependency Injection Container, no other files needed to be changed to make this happen.</p>

<h2 id="using-decorators-for-investigation">Using decorators for investigation</h2>

<p>Now, if we want to investigate the requests and responses that we get from a service while the application is running, e.g. when an unidentified bug is happening, we could do it with a decorator. The rest of the application won't know about it and should just keep on working as usual, while we get logs of the data that we want:</p>

<pre><code class="php">&lt;?php

namespace CoffeeRun;

final class LoggingClient implements HttpClient
{
    private $wrappedClient;
    private $logger;

    public function __construct(HttpClient $wrappedClient, LoggerInterface $logger)
    {
        $this-&gt;wrappedClient = $wrappedClient;
        $this-&gt;logger = $logger;
    }

    public function execute(Request $request): Response
    {
        $this-&gt;logger-&gt;debug('request', $request);

        $response = $this-&gt;wrappedClient-&gt;execute($request);

        $this-&gt;logger-&gt;debug('response', $response);

        return $response;
    }
}
</code></pre>

<p>The request and response are logged in our logs now, and they look good to us, but we still haven't found what we're looking for and we want to see if the requests our app is making work from the command line using <code>curl</code>. What if we made our application also log the complete curl commands? Then we could just copy paste them in our terminal to test them locally.</p>

<pre><code class="php">&lt;?php

namespace CoffeeRun;

final class CurlCommandLoggingClient implements HttpClient
{
    private $wrappedClient;
    private $logger;

    public function __construct(HttpClient $wrappedClient, LoggerInterface $logger)
    {
        $this-&gt;wrappedClient = $wrappedClient;
        $this-&gt;logger = $logger;
    }

    public function execute(Request $request): Response
    {
        $method = $request-&gt;getMethod();
        $url = $request-&gt;getUrl();
        $params = $request-&gt;getParams();
        $headers = $request-&gt;getHeaders();

        $curlString = 'curl';
        $curlString .= ' --' . strtolower($method);

        foreach ($params as $key =&gt; $value) {
            $curlString .= ' --data "' . $key . '=' . $value . '"';
        }

        foreach ($headers as $key =&gt; $value) {
            $curlString .= ' --header "' . $key . '=' . $value . '"';
        }

        $curlString .= ' "' . $url . '"';

        $this-&gt;logger-&gt;debug('curl command', $curlString);

        return $this-&gt;client-&gt;execute($request);
    }
}
</code></pre>

<p>Of course, this is an oversimplified way of building the <code>curl</code> command, but this will help you debug your HTTP calls by copy/pasting them to your terminal! Easy as that, and still no changes to the existing code. It takes one line to change it, and one line to delete and bring it back to production values.</p>

<h2 id="concerns">Concerns</h2>

<ul>
<li>Liskov Substition Principle: It's very important that our decorators still adhere to the original contract of the wrapped instance (in this case the <code>HttpClient</code> interface). If the decorator would produce another return value, or take different method parameters, it wouldn't work.</li>
<li>Applying a decorator that logs a lot of data in production might have an impact on your host. This is just an example of using your existing interfaces to create some plug &amp; play debugging solutions. If you do something like this in production, use the same caution as with other changes in production.</li>
</ul>

<p>That's it! Have fun.</p>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[A trip to Nordic.js ✈️]]></title>
            <link href="/blog/2017/09/15/nordicjs"/>
            <updated>2017-09-15T10:00:00+00:00</updated>
            <id>/blog/2017/09/15/nordicjs</id>
            <content type="html"><![CDATA[<p><center>
<img src="/images/2017-09-15-nordicjs/nordicjs.png" alt="Nordic.js cover" /><br />
</center></p>

<p>This year I was finally able to make it to <a href="http://nordicjs.com/">Nordic.js</a> whoot whoot.
This conference deserves to be on your radar! Read on for some impressions from a fellow dev.</p>

<h2 id="talks-%F0%9F%91%A9%E2%80%8D%F0%9F%8F%AB%F0%9F%91%A8%E2%80%8D%F0%9F%8F%AB">Talks 👩‍🏫👨‍🏫</h2>

<p><em>At the time of writing no videos are online but they will be soonish. Check the <a href="https://www.youtube.com/user/nordicjs">Nordic.js youtube channel</a> for updates.</em></p>

<p>This was the first single track conference I went to and I actually prefer this format compared to multi-track conferences where you always tend to shift to things familiar. "Just serve me the menu, I trust the chefs" is much more enjoyable, and oh boy these chefs deserve some Michelin stars because the menu was delicious.</p>

<p>Talks were about Javascript, frontend development in general and the Javascript community. Below a small list of my favourites.</p>

<h3 id="sociolinguistics-and-the-javascript-community%3A-a-love-story"><a href="http://nordicjs.com/speakers#harriet-lawrence">Sociolinguistics and the Javascript community: a love story</a></h3>

<p>Let's start with "community". 
The most surprising talk of the conference was about sociolinguistics.
Not something that I would choose on a multi-track conference but super glad I saw this one. Small things can make a huge difference, and I love that.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Don’t use words like “easy” or “simple” in instructions so users don’t feel ashamed if they fail. Brilliant talk <a href="https://twitter.com/harrietgl">@harrietgl</a>! 👏 <a href="https://twitter.com/hashtag/NordicJS?src=hash">#NordicJS</a> <a href="https://t.co/4aly56IzC0">pic.twitter.com/4aly56IzC0</a></p>&mdash; Jyri Tuulos (@jtuulos) <a href="https://twitter.com/jtuulos/status/905736469226151936">September 7, 2017</a></blockquote>

<p><em>video coming soon</em></p>

<h3 id="best-practices-for-reusable-ui-components"><a href="http://nordicjs.com/speakers#mars-jullian">Best Practices for reusable UI components</a></h3>

<p>Next up was a talk about React, which we use day to day at CXSocial, so any talk about it is always insightful. You often think big companies use complex techniques but actually everything can be pretty straightforward. Great tips from Mars and if you are starting out with React you should definitely check them out.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Reusable UI components should be: <br>1. self-sufficient<br>2. easy to integrate with<a href="https://twitter.com/marsjosephine">@marsjosephine</a> <a href="https://twitter.com/hashtag/nordicjs?src=hash">#nordicjs</a> <a href="https://twitter.com/hashtag/react?src=hash">#react</a> ⚛</p>&mdash; Nordic.js (@nordicjs) <a href="https://twitter.com/nordicjs/status/905780159248310272">September 7, 2017</a></blockquote>

<p><em>video coming soon</em></p>

<h3 id="p2p"><a href="http://nordicjs.com/speakers#feross-aboukhadijeh">P2P</a></h3>

<p>How did I miss that P2P is a thing now in browsers? Luckily we got this great intro by Feross.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">I love how <a href="https://twitter.com/feross">@feross</a> has just given a super approachable talk about peer to peer 💖 also with great slides and demos! <a href="https://twitter.com/hashtag/nordicjs?src=hash">#nordicjs</a></p>&mdash; fantastic ms. 🇸🇪 (@fox) <a href="https://twitter.com/fox/status/906132074058457092">September 8, 2017</a></blockquote>

<p><em>video coming soon</em></p>

<h2 id="conference-%F0%9F%8E%9F">Conference 🎟</h2>

<p>Here are some things that things that made the conference stand out:</p>

<h3 id="make-new-friends-%F0%9F%91%AD%F0%9F%91%AB">Make new friends 👭👫</h3>

<p>Nordic.js does everything in it's power to make everyone feel welcome and loved. The diverse group of people that show up is a testimony to that. A community I feel proud to be a part of.</p>

<p>The conference organizes "Dinner with new friends", a fun way to meet new people. They book a table at a restaurant in Stockholm for you and 5 other people from the conference. If you are a shy person like me you instantly have 5 new conference buddies.</p>

<h3 id="festen-%F0%9F%8E%89">Festen 🎉</h3>

<p>During the conference after party you can participate in a "Code In The Dark" competition. Create a HTML frontend site without testing your code. Does it scare you? Well me too but it's fun to watch brave souls attempt it, I suddenly understand sports now. Why wait until the conference you can actually organize it yourself just check <a href="http://codeinthedark.com/">codeinthedark.com</a>.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">The Code in the Dark has started! What a cool experience! <a href="https://twitter.com/hashtag/NordicJS?src=hash">#NordicJS</a> <a href="https://twitter.com/hashtag/JavaScript?src=hash">#JavaScript</a> <a href="https://twitter.com/hashtag/FrontEnd?src=hash">#FrontEnd</a> <a href="https://t.co/0A2gnzT2bl">pic.twitter.com/0A2gnzT2bl</a></p>&mdash; Sweet Systems (@sweet_systems) <a href="https://twitter.com/sweet_systems/status/906196233945055232">September 8, 2017</a></blockquote>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>And the party well what can I say that's the most epic funtastic awesomist conference after party ever.</p>

<blockquote class="instagram-media" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:38.47222222222222% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/BYy1yxMhcP0/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">Een bericht gedeeld door Peter van der Meulen (@hendrikpetertje)</a> op <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2017-09-08T21:01:47+00:00">8 Sep 2017 om 2:01 PDT</time></p></div></blockquote>

<p><script async defer src="//platform.instagram.com/en_US/embeds.js"></script>
<small>Me and some new conference friends with an old familiar.</small></p>

<h2 id="practical-%F0%9F%92%B5">Practical 💵</h2>

<p>Some prices if you are trying to conference on a budget.</p>

<ul>
<li>Ticket: Regular Bird - 678 euro</li>
<li>Flights: Brussels Zaventem &lt;=> Stockholm Bromma (Brussels airlines) - 95 euro</li>
<li>Lodging: Skanstulls Vandrarhem 3 nights - 83 euro</li>
</ul>

<h2 id="tips-%E2%9C%94">Tips ✔</h2>

<p>I walked everywhere during my trip (except from the airport to the city center). Stockholm is a beautiful city and very pedestrian-friendly.</p>

<p>Want to buy tickets for next year? Sign up for the <a href="http://nordicjs.com">Nordic.js newsletter</a> and be fast very fast because it sells out quickly.</p>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
]]></content>
        </entry>
    </feed>